(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/product/search"],{"04cf":function(t,e,r){"use strict";var s=r("cad3"),n=r.n(s);n.a},"14e3":function(t,e,r){"use strict";var s;r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return a})),r.d(e,"a",(function(){return s}));var n=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){return t.$wanlshop.back(1)})},a=[]},"19ad":function(t,e,r){"use strict";(function(t){r("0429");s(r("66fd"));var e=s(r("446e"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,r("543d")["createPage"])},"446e":function(t,e,r){"use strict";r.r(e);var s=r("14e3"),n=r("8b3c");for(var a in n)"default"!==a&&function(t){r.d(e,t,(function(){return n[t]}))}(a);r("04cf");var o,i=r("f0c5"),c=Object(i["a"])(n["default"],s["b"],s["c"],!1,null,null,null,!1,s["a"],o);e["default"]=c.exports},"8b3c":function(t,e,r){"use strict";r.r(e);var s=r("9c18"),n=r.n(s);for(var a in s)"default"!==a&&function(t){r.d(e,t,(function(){return s[t]}))}(a);e["default"]=n.a},"9c18":function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(r("a34a"));function n(t){return t&&t.__esModule?t:{default:t}}function a(t,e,r,s,n,a,o){try{var i=t[a](o),c=i.value}catch(u){return void r(u)}i.done?e(c):Promise.resolve(c).then(s,n)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(s,n){var o=t.apply(e,r);function i(t){a(o,s,n,i,c,"next",t)}function c(t){a(o,s,n,i,c,"throw",t)}i(void 0)}))}}var i={data:function(){return{wanlsys:this.$wanlshop.wanlsys(),searchKeywords:"",isHistory:!0,searchList:{},historyList:[],search:{categoryList:{},searchList:{}}}},onReady:function(){this.loadData(),this.historyList=t.getStorageSync("search:history")},onLoad:function(t){t.keywords&&(this.searchKeywords=t.keywords)},methods:{loadData:function(){var t=this;return o(s.default.mark((function e(){return s.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.$api.get({url:"/wanlshop/common/searchList",success:function(e){t.searchList=e}});case 1:case"end":return e.stop()}}),e)})))()},loadSearch:function(t){var e=this;return o(s.default.mark((function r(){return s.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.$api.get({url:"/wanlshop/common/search",data:{search:t},success:function(t){e.search=t,0==t.categoryList.length&&0==t.searchList.length||(e.isHistory=!1)}});case 1:case"end":return r.stop()}}),r)})))()},setSearch:function(t){var e=this;return o(s.default.mark((function r(){return s.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.$api.get({url:"/wanlshop/common/setSearch",data:{keywords:t}});case 1:case"end":return r.stop()}}),r)})))()},setHistory:function(e){this.setSearch(e),this.loadData();var r=t.getStorageSync("search:history");this.historyList=[],this.historyList=r;var s=r;s||(s=[]);var n={};n="string"===typeof e?{keywords:e}:e;for(var a=0;a<s.length;a++)if(s[a].keywords===n.keywords){s.splice(a,1);break}s.unshift(n),t.setStorage({key:"search:history",data:s})},removeHistory:function(){var e=this;t.showModal({title:"提示",content:"是否清理全部搜索历史？该操作不可逆。",success:function(r){r.confirm&&(e.historyList=[],t.removeStorage({key:"search:history"}))}})},keywordsToList:function(t){this.setHistory(t),this.$wanlshop.to("/pages/product/list?search=".concat(t))},categoryToList:function(t,e){this.setHistory(e),this.$wanlshop.to("/pages/product/list?data=".concat(JSON.stringify({category_id:t,category_name:e})))},onSearchInputChanged:function(t){var e=t.detail.value;e?this.loadSearch(e):this.isHistory=!0},onSearchInputConfirmed:function(e){var r=e.detail.value;if(r)this.isHistory=!0,t.hideKeyboard(),this.historyList=[],this.historyList=t.getStorageSync("search:history"),this.keywordsToList(r);else{if(this.isHistory=!0,!this.searchKeywords)return void t.showModal({title:"提示",content:"请输入内容。"});this.keywordsToList(this.searchKeywords)}}}};e.default=i}).call(this,r("543d")["default"])},cad3:function(t,e,r){}},[["19ad","common/runtime","common/vendor"]]]);