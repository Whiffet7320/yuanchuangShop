(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/signin/signin"],{"0cd5":function(n,t,e){"use strict";e.r(t);var i=e("3e02"),s=e.n(i);for(var a in i)"default"!==a&&function(n){e.d(t,n,(function(){return i[n]}))}(a);t["default"]=s.a},"37cc":function(n,t,e){"use strict";e.d(t,"b",(function(){return s})),e.d(t,"c",(function(){return a})),e.d(t,"a",(function(){return i}));var i={wanlSteps:function(){return e.e("components/wanl-steps/wanl-steps").then(e.bind(null,"98ae"))},uniCalendar:function(){return Promise.all([e.e("common/vendor"),e.e("components/uni-calendar/uni-calendar")]).then(e.bind(null,"df83"))},wanlModal:function(){return e.e("components/wanl-modal/wanl-modal").then(e.bind(null,"addf"))}},s=function(){var n=this,t=n.$createElement,e=(n._self._c,n.$wanlshop.oss(n.user.avatar,52,52,2,"avatar")),i=n.$wanlshop.appstc("/common/cup.png");n._isMounted||(n.e0=function(t){n.attendanceModalVisible=!1}),n.$mp.data=Object.assign({},{$root:{g0:e,g1:i}})},a=[]},"3e02":function(n,t,e){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(e("a34a")),s=e("2f62");function a(n){return n&&n.__esModule?n:{default:n}}function o(n,t,e,i,s,a,o){try{var c=n[a](o),r=c.value}catch(u){return void e(u)}c.done?t(r):Promise.resolve(r).then(i,s)}function c(n){return function(){var t=this,e=arguments;return new Promise((function(i,s){var a=n.apply(t,e);function c(n){o(a,i,s,c,r,"next",n)}function r(n){o(a,i,s,c,r,"throw",n)}c(void 0)}))}}function r(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,i)}return e}function u(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?r(Object(e),!0).forEach((function(t){l(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function l(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}var d={data:function(){return{signinData:{},selected:[],signinInfo:"",attendanceModalVisible:!1,stepsOption:[{title:"1天",desc:"+1"},{title:"2天",desc:"+2"},{title:"3天",desc:"+3"},{title:"4天",desc:"+4"},{title:"5天",desc:"+5"},{title:"6天",desc:"+6"},{title:"7天",desc:"+7"},{title:"7天+",desc:"+7",circle:"/static/images/integrals/goal.png",circleStyle:"width: 47rpx; height: 39rpx;"}]}},onLoad:function(n){this.loadData()},computed:u({},(0,s.mapState)(["user"])),methods:{loadData:function(){var n=this;return c(i.default.mark((function t(){return i.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n.$api.get({url:"/wanlshop/signin/getSignin",success:function(t){n.signinData=t,n.stepsOption[0].desc="+"+t.signinscore.s1,n.stepsOption[1].desc="+"+t.signinscore.s2,n.stepsOption[2].desc="+"+t.signinscore.s3,n.stepsOption[3].desc="+"+t.signinscore.s4,n.stepsOption[4].desc="+"+t.signinscore.s5,n.stepsOption[5].desc="+"+t.signinscore.s6,n.stepsOption[6].desc="+"+t.signinscore.s7,n.stepsOption[7].desc="+"+t.signinscore.sn,t.list.forEach((function(t){n.selected.push({date:n.timestampToTime(t.createtime),info:"已签"})})),n.$store.commit("user/setUserInfo",{score:t.user_score})}});case 1:case"end":return t.stop()}}),t)})))()},attendance:function(){var n=this;this.$api.post({url:"/wanlshop/signin/dosign",success:function(t){n.loadData(),n.signinData.signin?n.signinInfo="已经连续签到"+n.signinData.successions+"天/n明日继续签到可获得"+n.signinData.score+"积分":n.signinInfo="赠送的"+n.signinData.score+"积分已发到您的账户中",n.attendanceModalVisible=!0}})},change:function(t){var e=this;this.signinData.date==t.fulldate?this.attendance():1==this.signinData.isfillup?n.showModal({title:"确定要补签",content:"确认进行补签日期："+t.fulldate+"？补签将消耗"+this.signinData.fillupscore+"积分",success:function(n){n.confirm&&e.$api.get({url:"/wanlshop/signin/fillup",data:{date:t.fulldate},success:function(n){e.signinInfo="补签"+t.fulldate+"日成功，本次扣除"+e.signinData.fillupscore+"积分",e.attendanceModalVisible=!0,e.loadData()}})}}):this.$wanlshop.msg("系统不允许补签")},timestampToTime:function(n){var t=new Date(1e3*n),e=t.getFullYear()+"-",i=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",s=t.getDate();return e+i+s},onScore:function(){this.$wanlshop.to("/pages/user/signin/log")}}};t.default=d}).call(this,e("543d")["default"])},"420d":function(n,t,e){"use strict";e.r(t);var i=e("37cc"),s=e("0cd5");for(var a in s)"default"!==a&&function(n){e.d(t,n,(function(){return s[n]}))}(a);e("ded5");var o,c=e("f0c5"),r=Object(c["a"])(s["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],o);t["default"]=r.exports},6976:function(n,t,e){},aa08:function(n,t,e){"use strict";(function(n){e("0429");i(e("66fd"));var t=i(e("420d"));function i(n){return n&&n.__esModule?n:{default:n}}n(t.default)}).call(this,e("543d")["createPage"])},ded5:function(n,t,e){"use strict";var i=e("6976"),s=e.n(i);s.a}},[["aa08","common/runtime","common/vendor"]]]);