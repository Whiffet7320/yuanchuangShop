{"version":3,"sources":["webpack:///C:/Users/Administrator/Desktop/wanlshop_v1.0.8/components/canvas-drawer.vue?8b3d","webpack:///C:/Users/Administrator/Desktop/wanlshop_v1.0.8/components/canvas-drawer.vue?3043","webpack:///C:/Users/Administrator/Desktop/wanlshop_v1.0.8/components/canvas-drawer.vue?a736","webpack:///C:/Users/Administrator/Desktop/wanlshop_v1.0.8/components/canvas-drawer.vue?5513","uni-app:///components/canvas-drawer.vue","webpack:///C:/Users/Administrator/Desktop/wanlshop_v1.0.8/components/canvas-drawer.vue?5c7c","webpack:///C:/Users/Administrator/Desktop/wanlshop_v1.0.8/components/canvas-drawer.vue?f089"],"names":[],"mappings":"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","file":"components/canvas-drawer.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./canvas-drawer.vue?vue&type=template&id=baca724a&scoped=true&\"\nvar renderjs\nimport script from \"./canvas-drawer.vue?vue&type=script&lang=js&\"\nexport * from \"./canvas-drawer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./canvas-drawer.vue?vue&type=style&index=0&id=baca724a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"baca724a\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/canvas-drawer.vue\"\nexport default component.exports","export * from \"-!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./canvas-drawer.vue?vue&type=template&id=baca724a&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./canvas-drawer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./canvas-drawer.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\n\t\t<canvas canvas-id=\"canvasdrawer\" :style=\"{'width': width + 'px','height': height + 'px'}\" class=\"board\" v-if=\"showCanvas\"></canvas>\n\t</view>\n</template>\n\n<script>\n\texport default {\n\t\tprops: {\n\t\t\tpainting: {\n\t\t\t\ttype: Object,\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tshowCanvas: false,\n\t\t\t\twidth: 100,\n\t\t\t\theight: 100,\n\t\t\t\ttempFileList: [],\n\t\t\t\tisPainting: false,\n\t\t\t\tctx: null,\n\t\t\t\tcache: Array()\n\t\t\t}\n\t\t},\n\t\twatch: {\n\t\t\tpainting: {\r\n\t\t\t\thandler: function(newVal, oldVal) {\n\t\t\t\t\tif (!this.isPainting) {\n\t\t\t\t\t\tif (JSON.stringify(newVal) !== JSON.stringify(oldVal)) {\n\t\t\t\t\t\t\tif (newVal && newVal.width && newVal.height) {\n\t\t\t\t\t\t\t\tthis.showCanvas = true;\n\t\t\t\t\t\t\t\tthis.isPainting = true;\n\t\t\t\t\t\t\t\tthis.readyPigment();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (newVal && newVal.mode !== 'same') {\n\t\t\t\t\t\t\t\t// this.triggerEvent('getImage', {errMsg: 'canvasdrawer:samme params'})\n\t\t\t\t\t\t\t\tthis.$emit('getImage', {errMsg: 'canvasdrawer:samme params'})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tdeep: true\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\t\t\tuni.removeStorageSync('canvasdrawer_pic_cache');\n\t\t\tthis.ctx = uni.createCanvasContext('canvasdrawer', this);\n\t\t},\n\t\tmethods: {\n\t\t\treadyPigment () {\n\t\t\t\t// const { width, height, views } = this.painting\n\t\t\t\tconst width = this.painting.width;\n\t\t\t\tconst height = this.painting.height;\n\t\t\t\tconst views = this.painting.views;\n\t\t\t\t\n\t\t\t\tthis.width = width;\n\t\t\t\tthis.height = height;\n\t\t\t\t\n\t\t\t\tconst inter = setInterval(() => {\n\t\t\t\t\tif (this.ctx) {\n\t\t\t\t\t\tclearInterval(inter);\n\t\t\t\t\t\tthis.ctx.clearActions();\n\t\t\t\t\t\tthis.ctx.save();\n\t\t\t\t\t\tthis.getImagesInfo(views);\n\t\t\t\t\t}\n\t\t\t\t}, 100)\n\t\t\t},\n\t\t\tgetImagesInfo(views) {\n\t\t\t\tconst imageList = [];\n\t\t\t\tfor (let i = 0; i < views.length; i++) {\n\t\t\t\t\tif (views[i].type === 'image') {\n\t\t\t\t\t\timageList.push(this.getImageInfo(views[i].url))\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst loadTask = [];\n\t\t\t\tfor (let i = 0; i < Math.ceil(imageList.length / 8); i++) {\n\t\t\t\t\tloadTask.push(new Promise((resolve, reject) => {\n\t\t\t\t\t\tPromise.all(imageList.splice(i * 8, 8)).then(res => {\n\t\t\t\t\t\t\tresolve(res)\n\t\t\t\t\t\t}).catch(res => {\n\t\t\t\t\t\t\treject(res)\n\t\t\t\t\t\t})\n\t\t\t\t\t}))\n\t\t\t\t}\n\t\t\t\tPromise.all(loadTask).then(res => {\n\t\t\t\t\tlet tempFileList = [];\n\t\t\t\t\tfor (let i = 0; i < res.length; i++) {\n\t\t\t\t\t\ttempFileList = tempFileList.concat(res[i])\n\t\t\t\t\t}\n\t\t\t\t\tthis.tempFileList = tempFileList;\n\t\t\t\t\tthis.startPainting();\n\t\t\t\t})\n\t\t\t},\n\t\t    startPainting () {\n\t\t\t\t\n\t\t\t\tconst tempFileList = this.tempFileList;\n\t\t\t\tconst views = this.painting.views;\n\t\t\t\t\n\t\t\t\t// const { tempFileList, painting: { views } } = this.$data\n\t\t\t\tfor (let i = 0, imageIndex = 0; i < views.length; i++) {\n\t\t\t\t\tif (views[i].type === 'image') {\n\t\t\t\t\t\tthis.drawImage({\n\t\t\t\t\t\t\t...views[i],\n\t\t\t\t\t\t\turl: tempFileList[imageIndex]\n\t\t\t\t\t\t})\n\t\t\t\t\t\timageIndex++\n\t\t\t\t\t} else if (views[i].type === 'text') {\n\t\t\t\t\t\tif (!this.ctx.measureText) {\n\t\t\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\t\t\ttitle: '提示',\n\t\t\t\t\t\t\t\tcontent: '当前微信版本过低，无法使用 measureText 功能，请升级到最新微信版本后重试。'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t// this.triggerEvent('getImage', {errMsg: 'canvasdrawer:version too low'})\n\t\t\t\t\t\t\tthis.$emit('getImage', {errMsg: 'canvasdrawer:version too low'});\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.drawText(views[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (views[i].type === 'rect') {\n\t\t\t\t\t\tthis.drawRect(views[i])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.ctx.draw(false, () => {\n\t\t\t\t\tuni.setStorageSync('canvasdrawer_pic_cache', this.cache);\n\t\t\t\t\tconst system = uni.getSystemInfoSync().system;\n\t\t\t\t\tif (/ios/i.test(system)) {\n\t\t\t\t\t\tthis.saveImageToLocal();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 延迟保存图片，解决安卓生成图片错位bug。\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.saveImageToLocal();\n\t\t\t\t\t\t}, 800)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t    },\n\t\t\tdrawImage (params) {\n\t\t\t\tthis.ctx.save();\n\t\t\t\tconst { url, top = 0, left = 0, width = 0, height = 0, borderRadius = 0, deg = 0 } = params;\r\n\t\t\t\t// if (borderRadius) {\r\n\t\t\t\t// \t// 圓角\r\n\t\t\t\t// \tthis.ctx.beginPath()\r\n\t\t\t\t// \tthis.ctx.arc(width / 2 + left, height / 2 + top, width / 2, 0, Math.PI * 2, false);\r\n\t\t\t\t// \tthis.ctx.clip()\r\n\t\t\t\t// \tthis.ctx.drawImage(url, left, top, width, height)\r\n\t\t\t\t// } \n\t\t\t\tif (deg !== 0) {\n\t\t\t\t\tthis.ctx.translate(left + width/2, top + height/2);\n\t\t\t\t\tthis.ctx.rotate(deg * Math.PI / 180);\n\t\t\t\t\tthis.ctx.drawImage(url, -width/2, -height/2, width, height);\n\t\t\t\t} else {\n\t\t\t\t\tthis.ctx.drawImage(url, left, top, width, height);\n\t\t\t\t}\n\t\t\t\tthis.ctx.restore();\n\t\t\t},\n\t\t    drawText (params) {\n\t\t\t\tthis.ctx.save();\n\t\t\t\tconst {\n\t\t\t\t\tMaxLineNumber = 2,\n\t\t\t\t\tbreakWord = false,\n\t\t\t\t\tcolor = 'black',\n\t\t\t\t\tcontent = '',\n\t\t\t\t\tfontSize = 16,\n\t\t\t\t\ttop = 0,\n\t\t\t\t\tleft = 0,\n\t\t\t\t\tlineHeight = 20,\n\t\t\t\t\ttextAlign = 'left',\n\t\t\t\t\twidth,\n\t\t\t\t\tbolder = false,\n\t\t\t\t\ttextDecoration = 'none'\n\t\t\t\t} = params\n\t\t      \n\t\t\t\tthis.ctx.beginPath();\n\t\t\t\tthis.ctx.setTextBaseline('top');\n\t\t\t\tthis.ctx.setTextAlign(textAlign);\n\t\t\t\tthis.ctx.setFillStyle(color);\n\t\t\t\tthis.ctx.setFontSize(fontSize);\n\t\t\n\t\t\t\tif (!breakWord) {\n\t\t\t\t\tthis.ctx.fillText(content, left, top);\n\t\t\t\t\tthis.drawTextLine(left, top, textDecoration, color, fontSize, content);\n\t\t\t\t} else {\n\t\t\t\t\tlet fillText = '';\n\t\t\t\t\tlet fillTop = top;\n\t\t\t\t\tlet lineNum = 1;\n\t\t\t\t\tfor (let i = 0; i < content.length; i++) {\n\t\t\t\t\t\tfillText += [content[i]];\n\t\t\t\t\t\tif (this.ctx.measureText(fillText).width > width) {\n\t\t\t\t\t\t\tif (lineNum === MaxLineNumber) {\n\t\t\t\t\t\t\t\tif (i !== content.length) {\n\t\t\t\t\t\t\t\t\tfillText = fillText.substring(0, fillText.length - 1) + '...';\n\t\t\t\t\t\t\t\t\tthis.ctx.fillText(fillText, left, fillTop);\n\t\t\t\t\t\t\t\t\tthis.drawTextLine(left, fillTop, textDecoration, color, fontSize, fillText);\n\t\t\t\t\t\t\t\t\tfillText = '';\n\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.ctx.fillText(fillText, left, fillTop);\n\t\t\t\t\t\t\tthis.drawTextLine(left, fillTop, textDecoration, color, fontSize, fillText);\n\t\t\t\t\t\t\tfillText = '';\n\t\t\t\t\t\t\tfillTop += lineHeight;\n\t\t\t\t\t\t\tlineNum ++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tthis.ctx.fillText(fillText, left, fillTop);\n\t\t\t\t\tthis.drawTextLine(left, fillTop, textDecoration, color, fontSize, fillText);\n\t\t\t\t}\n\t\t      \n\t\t\t\tthis.ctx.restore();\n\t\t\n\t\t\t\tif (bolder) {\n\t\t\t\t\tthis.drawText({\n\t\t\t\t\t\t...params,\n\t\t\t\t\t\tleft: left + 0.3,\n\t\t\t\t\t\ttop: top + 0.3,\n\t\t\t\t\t\tbolder: false,\n\t\t\t\t\t\ttextDecoration: 'none' \n\t\t\t\t\t})\n\t\t\t\t}\n\t\t    },\n\t\t    drawTextLine (left, top, textDecoration, color, fontSize, content) {\n\t\t\t\tif (textDecoration === 'underline') {\n\t\t\t\t\tthis.drawRect({\n\t\t\t\t\t\tbackground: color,\n\t\t\t\t\t\ttop: top + fontSize * 1.2,\n\t\t\t\t\t\tleft: left - 1,\n\t\t\t\t\t\twidth: this.ctx.measureText(content).width + 3,\n\t\t\t\t\t\theight: 1\n\t\t\t\t\t})\n\t\t\t\t} else if (textDecoration === 'line-through') {\n\t\t\t\t\tthis.drawRect({\n\t\t\t\t\t\tbackground: color,\n\t\t\t\t\t\ttop: top + fontSize * 0.6,\n\t\t\t\t\t\tleft: left - 1,\n\t\t\t\t\t\twidth: this.ctx.measureText(content).width + 3,\n\t\t\t\t\t\theight: 1\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\tdrawRect (params) {\n\t\t\t\tthis.ctx.save();\n\t\t\t\tconst { background, top = 0, left = 0, width = 0, height = 0 } = params;\n\t\t\t\tthis.ctx.setFillStyle(background);\n\t\t\t\tthis.ctx.fillRect(left, top, width, height);\n\t\t\t\tthis.ctx.restore();\n\t\t    },\n\t\t\tgetImageInfo (url) {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tif (this.cache[url]) {\n\t\t\t\t\t\tresolve(this.cache[url]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst objExp = new RegExp(/^http(s)?:\\/\\/([\\w-]+\\.)+[\\w-]+(\\/[\\w- .\\/?%&=]*)?/);\n\t\t\t\t\t\tif (objExp.test(url)) {\n\t\t\t\t\t\t\tuni.getImageInfo({\n\t\t\t\t\t\t\t\tsrc: url,\n\t\t\t\t\t\t\t\tcomplete: res => {\n\t\t\t\t\t\t\t\t\tif (res.errMsg === 'getImageInfo:ok') {\n\t\t\t\t\t\t\t\t\t\tthis.cache[url] = res.path;\n\t\t\t\t\t\t\t\t\t\tresolve(res.path);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// this.triggerEvent('getImage', {errMsg: 'canvasdrawer:download fail'})\n\t\t\t\t\t\t\t\t\t\tthis.$emit('getImage', {errMsg: 'canvasdrawer:download fail'});\n\t\t\t\t\t\t\t\t\t\treject(new Error('getImageInfo fail'));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.cache[url] = url;\n\t\t\t\t\t\t\tresolve(url);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t    },\n\t\t\tsaveImageToLocal () {\n\t\t\t\t// const { width, height } = this.data\n\t\t\t\tconst width = this.width;\n\t\t\t\tconst height = this.height;\n\t\t\t\tuni.canvasToTempFilePath({\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0,\n\t\t\t\t\twidth,\n\t\t\t\t\theight,\n\t\t\t\t\tcanvasId: 'canvasdrawer',\n\t\t\t\t\tcomplete: res => {\n\t\t\t\t\t\tif (res.errMsg === 'canvasToTempFilePath:ok') {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tthis.showCanvas = false;\n\t\t\t\t\t\t\tthis.isPainting = false;\n\t\t\t\t\t\t\tthis.tempFileList = [];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// this.triggerEvent('getImage', {tempFilePath: res.tempFilePath, errMsg: 'canvasdrawer:ok'})\n\t\t\t\t\t\t\tthis.$emit('getImage', {tempFilePath: res.tempFilePath, errMsg: 'canvasdrawer:ok'});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// this.triggerEvent('getImage', {errMsg: 'canvasdrawer:fail'})\n\t\t\t\t\t\t\tthis.$emit('getImage', {errMsg: 'canvasdrawer:fail'});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, this)\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style scoped>\n\t.board {\n\t  position: fixed;\n\t  top: 2000upx;\n\t}\n</style>","import mod from \"-!../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./canvas-drawer.vue?vue&type=style&index=0&id=baca724a&scoped=true&lang=css&\"; export default mod; export * from \"-!../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./canvas-drawer.vue?vue&type=style&index=0&id=baca724a&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1636350393450\n      var cssReload = require(\"C:/Users/Administrator/Desktop/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}